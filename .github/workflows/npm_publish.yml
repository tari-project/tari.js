---
# Publishing the package to the npm registry when the version number changes
# See https://github.com/marketplace/actions/npm-publish for more information
name: Publish Package to npmjs

on:
  push:
    branches: main

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: 'moonrepo/setup-toolchain@v0'
        with:
          auto-install: true
      - run: pnpm install
      - run: moon :build
      - uses: simenandre/publish-with-pnpm@v2
        with:
          npm-auth-token: ${{ secrets.NPM_TOKEN }}

